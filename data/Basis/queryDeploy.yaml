# 公共参数
case_common:
  allureEpic: 开发平台接口
  allureFeature: 基础功能验证
  allureStory: 查询发版切板进度和详情


#查询发版进度（2.0发版测试区）
query_DeployProcess_001:
  host: ${{athena_deployer_host()}}
  url: /athenadeployer/deploy/v3/queryDeployProcess
  method: GET
  detail: 查询应用发版进度
  headers:
    digi-middleware-auth-user: $cache{token}    #cookie: $cache{login_cookie}
    token: $cache{token}
  requestType: PARAMS
  is_run: False
  data:
    deployNo: $cache{deployNo}
    application: ${{app2_code()}}
  # 是否有依赖业务，为空或者false则表示没有
  dependence_case: False
  # 依赖的数据
  dependence_case_data:
    - case_id: basis_PublishTest_002
      dependent_data:
        - dependent_type: response
          jsonpath: $.data
          set_cache: deployNo
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:


#查询发版/切版详情
query_DeployDetail_001:
  host: ${{athena_deployer_host()}}
  url: /athenadeployer/deploy/v3/queryDeployDetailByApplication
  method: GET
  detail: 查询应用发版详情
  headers:
    digi-middleware-auth-user: $cache{token}    #cookie: $cache{login_cookie}
    token: $cache{token}
  requestType: PARAMS
  is_run: False
  data:
    deployNo: $cache{deployNo}
    application: ${{app2_code()}}
  # 是否有依赖业务，为空或者false则表示没有
  dependence_case: False
  # 依赖的数据
  dependence_case_data:
    - case_id: basis_PublishTest_002
      dependent_data:
        - dependent_type: response
          jsonpath: $.data
          set_cache: deployNo
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:


#查询切板进度
query_SwitchProcess_001:
  host: ${{athena_deployer_host()}}
  url: /athenadeployer/deploy/v3/queryProcess
  method: GET
  detail: 查询应用发版进度
  headers:
    digi-middleware-auth-user: $cache{token}    #cookie: $cache{login_cookie}
    token: $cache{token}
  requestType: PARAMS
  is_run: False
  data:
    deployNo: a1db6768be984179bf3852aba7d52e49
    application: A20240311173157-lcdp
  # 是否有依赖业务，为空或者false则表示没有
  dependence_case: False
  # 依赖的数据
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 查询分支创建进度
# 查询分支信息
query_BranchInfo_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/multiBranch/$cache{BranchApp}/getBranchInfo
  method: GET
  detail: 查询分支创建进度
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
  requestType: PARAMS
  is_run: true
  data:
  # 是否有依赖业务，为空或者false则表示没有
  dependence_case: false
  # 依赖的数据
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:
