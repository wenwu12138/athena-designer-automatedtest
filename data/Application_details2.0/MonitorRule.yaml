# 公共参数
case_common:
  allureEpic: 开发平台接口
  allureFeature: 2.0应用详情
  allureStory: 数据侦测


# 根据侦测规则类型查询流程数量
process_FindProcessCountByTriggerType_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/process/findProcessCountByTriggerType
  method: GET
  detail: 根据侦测规则类型统计流程数量
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
    triggerTypes: processMonitor
    name: ""
    application: ${{app2_code()}}
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 分页查询侦测规则流程列表
process_FindProcessPagination_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/process/findProcessPagination
  method: GET
  detail: 分页查询侦测规则类型的流程列表
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
    triggerType: processMonitor
    name: ""
    pageNum: 1
    pageSize: 10
    application: ${{app2_code()}}
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 新增API类型定时侦测规则
monitorRule_AddAPITimingMonitor_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/businessDir/updateIntegrationAutomationInfo
  method: POST
  detail: 新增API类型定时侦测规则
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
    content-type: application/json
  requestType: json
  is_run: true
  data:
    application: ${{app2_code()}}
    type: process
    jsonObject:
      name:
        zh_CN: "API定时侦测${{get_time()}}"
        zh_TW: "API定時偵測${{get_time()}}"
        en_US: "API Timing Monitor${{get_time()}}"
      monitorType: API
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:


# 获取侦测规则树结构
monitorRule_GetMonitorRuleTree_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/task/monitorRule/getMonitorRuleTree
  method: GET
  detail: 获取侦测规则树结构
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
    appCode: ${{app2_code()}}
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 查询集成自动化信息
businessDir_QueryIntegrationAutomationInfo_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/businessDir/queryIntegrationAutomationInfo
  method: POST
  detail: 查询流程类型集成自动化信息
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
    content-type: application/json
  requestType: json
  is_run: true
  data:
    application: ${{app2_code()}}
    type: process
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 获取所有产品列表
monitorRule_GetAllProducts_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/task/monitorRule/getAllProducts
  method: GET
  detail: 获取侦测规则所有产品列表
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
    appCode: ${{app2_code()}}
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 获取应用根项目列表
project_GetRootProjects_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/project/getRootProjects/${{app2_code()}}
  method: GET
  detail: 获取应用根项目列表
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 生成标准代码
code_GenerateStandard_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/code/generate/standard
  method: POST
  detail: 生成DT缩写标准代码
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
    content-type: application/json
  requestType: json
  is_run: true
  data:
    typeCode: default
    paramMap:
      abbreviationCode: DT
      application: ${{app2_code()}}
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:
  current_request_set_cache:
    - type: response
      jsonpath: $.data
      name: monitorRule_code

# 获取应用所有模板
template_All_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/template/all
  method: GET
  detail: 获取应用所有模板列表
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
    applicationCode: ${{app2_code()}}
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 获取应用周期参数配置
applicationParam_GetParamConfig_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/applicationParam/getParamConfig
  method: POST
  detail: 获取应用周期参数配置
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
    content-type: application/json
  requestType: json
  is_run: true
  data:
    paramCatg: PERIOD
    sceneCatg: APPLICATION
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 检查引导页面跳过状态
guide_IsSkip_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/guide/isSkip
  method: GET
  detail: 检查引导页面是否跳过
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 查询应用流程列表
process_FindProcessList_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/process/findProcessList
  method: GET
  detail: 查询应用流程列表
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
    application: ${{app2_code()}}
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 2. 保存/创建侦测规则
monitorRule_SaveMonitorRule_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/task/monitorRule/saveMonitorRule
  method: POST
  detail: 保存侦测规则配置
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
    content-type: application/json
  requestType: json
  is_run: true
  data:
    code: $cache{monitorRule_code}
    triggerAction: null
    product:
      - code: ${{app2_code()}}
        rule:
          monitorRuleId: $cache{monitorRule_code}
          productName: ${{app2_code()}}
          isPollingIds: false
    name: "测试侦测${{get_time()}}"
    tenantId: null
    lang:
      name:
        zh_CN: "测试侦测${{get_time()}}"
        zh_TW: "測試偵測${{get_time()}}"
        en_US: "Test Monitor${{get_time()}}"
    type: "CUSTOM"
    standardPollingRule:
      start_time: "2025-11-19 00:00:00"
      monthly: 1
      bymonthday: 1
    monitorActionId: null
    dynamicParams: []
    autoRun: false
    executeOnStartup: false
    isDesignerSet: true
    isPollingIds: false
    actionType: null
    actionCommonId: null
    isContinue: false
    category: "API"
    application: ${{app2_code()}}
    addSourceType: "auto_perspective"
    # 完整的参数配置（36个参数）
    params:
      - lang:
          name:
            zh_CN: "名称"
            zh_TW: "名稱"
            en_US: "name"
          tip:
            zh_CN: "在交付设计器显示的参数名称"
            zh_TW: "在交付設計器顯示的參數名稱"
            en_US: "在交付設計器顯示的參數名稱"
          value:
            zh_CN: "测试侦测${{get_time()}}"
            zh_TW: "測試偵測${{get_time()}}"
            en_US: "Test Monitor${{get_time()}}"
        code: "name"
        name: "名称"
        displayType: "INPUT"
        required: true
        readOnly: false
        sequence: 100
        tip: "在交付设计器显示的参数名称"
        defaultValue: ""
        needLang: true
        value: "测试侦测${{get_time()}}"
        options: []
        width: "140px"
        attrIndex: 0
      # ... 这里需要包含完整的36个参数配置
      # 参照您提供的正常请求体中的完整参数列表
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 3. 获取侦测规则详情
monitorRule_GetMonitorRule_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/task/monitorRule/getMonitorRule/$cache{monitorRule_code}
  method: GET
  detail: 根据规则编码获取侦测规则详情
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 更新侦测规则配置
monitorRule_UpdateMonitorRule_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/task/monitorRule/updateMonitorRule
  method: POST
  detail: 更新侦测规则配置
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
    content-type: application/json
  requestType: json
  is_run: true
  data:
    code: $cache{monitorRule_code}
    triggerAction: null
    product:
      - code: ${{app2_code()}}
        rule:
          monitorRuleId: $cache{monitorRule_code}
          productName: ${{app2_code()}}
          isPollingIds: false
    name: "测试侦测${{get_time()}}"
    tenantId: "SYSTEM"
    lang:
      name:
        zh_CN: "测试侦测${{get_time()}}"
        zh_TW: "測試偵測${{get_time()}}"
        en_US: "Test Monitor${{get_time()}}"
    type: "CUSTOM"
    standardPollingRule:
      start_time: "2025-11-19 00:00:00"
      monthly: 1
      bymonthday: 1
    monitorActionId: null
    dynamicParams: []
    autoRun: false
    executeOnStartup: false
    isDesignerSet: true
    isPollingIds: false
    actionType: null
    actionCommonId: null
    isContinue: false
    category: "API"
    application: ${{app2_code()}}
    addSourceType: "auto_perspective"
    # 完整的36个参数配置（需要完整复制您提供的参数列表）
    params:
      - lang:
          name:
            zh_CN: "名称"
            zh_TW: "名稱"
            en_US: "name"
          tip:
            zh_CN: "在交付设计器显示的参数名称"
            zh_TW: "在交付設計器顯示的參數名稱"
            en_US: "在交付設計器顯示的參數名稱"
          value:
            zh_CN: "测试侦测${{get_time()}}"
            zh_TW: "測試偵測${{get_time()}}"
            en_US: "Test Monitor${{get_time()}}"
        code: "name"
        name: "名称"
        displayType: "INPUT"
        required: true
        readOnly: false
        sequence: 100
        tip: "在交付设计器显示的参数名称"
        defaultValue: ""
        needLang: true
        value: "测试侦测${{get_time()}}"
        options: []
        width: "140px"
        attrIndex: 0
      # ... 这里需要包含完整的36个参数配置
      # 参照您提供的成功请求体中的完整参数列表
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 查询侦测规则修改历史
operationRecord_GetMonitorRuleHistory_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/operationRecord/get
  method: GET
  detail: 查询侦测规则修改历史记录
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
    code: $cache{monitorRule_code}
    collection: monitorRule
    appCode: ${{app2_code()}}
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 发布侦测规则到固定租户
modulePublish_PublishMonitorRule_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/modulePublish/publish
  method: POST
  detail: 发布侦测规则到配置测试器租户
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
    content-type: application/json
    authorization: $cache{token}
    branch: develop
    routerkey: athenadeveloperTest
  requestType: json
  is_run: true
  data:
    pkValue: $cache{monitorRule_code}
    module: monitorRule
    application: ${{app2_code()}}
    tenantUsers:
      - tenantId: "athenadeveloperTest"
        tenantSid: 847600433497088
        tenantName: "配置测试器"
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 删除定时侦测规则
monitorRule_DeleteMonitorRule_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/task/monitorRule/deleteMonitorRule/$cache{monitorRule_code}
  method: GET
  detail: 删除指定的侦测规则
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:


# 创建主动上报类型侦测规则
businessDir_UpdateReportMonitor_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/businessDir/updateIntegrationAutomationInfo
  method: POST
  detail: 创建主动上报类型侦测规则
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
    content-type: application/json
  requestType: json
  is_run: true
  data:
    application: ${{app2_code()}}
    type: process
    jsonObject:
      name:
        zh_CN: "主动上报侦测${{get_time()}}"
        zh_TW: "主動上報偵測${{get_time()}}"
        en_US: "Report Monitor${{get_time()}}"
      monitorType: REPORT
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:



# 查询集成自动化信息
businessDir_QueryReportMonitorInfo_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/businessDir/queryIntegrationAutomationInfo
  method: POST
  detail: 查询主动上报侦测集成自动化信息
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
    content-type: application/json
  requestType: json
  is_run: true
  data:
    application: ${{app2_code()}}
    type: process
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 获取侦测规则树结构
monitorRule_GetReportMonitorTree_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/task/monitorRule/getMonitorRuleTree
  method: GET
  detail: 获取主动上报侦测规则树结构
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
    appCode: ${{app2_code()}}
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 获取所有产品列表
monitorRule_GetAllProducts_002:
  host: ${{athena_designer_host()}}
  url: /athena-designer/task/monitorRule/getAllProducts
  method: GET
  detail: 获取主动上报侦测相关产品列表
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
    appCode: ${{app2_code()}}
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 获取应用根项目列表
project_GetRootProjects_002:
  host: ${{athena_designer_host()}}
  url: /athena-designer/project/getRootProjects/${{app2_code()}}
  method: GET
  detail: 获取主动上报侦测应用根项目列表
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 生成主动上报侦测规则编码
code_GenerateReportMonitorCode_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/code/generate/standard
  method: POST
  detail: 生成主动上报侦测规则编码
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
    content-type: application/json
  requestType: json
  is_run: true
  data:
    typeCode: default
    paramMap:
      abbreviationCode: DT
      application: ${{app2_code()}}
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:
  current_request_set_cache:
    - type: response
      jsonpath: $.data
      name: report_monitor_code

# 获取应用所有模板
template_All_002:
  host: ${{athena_designer_host()}}
  url: /athena-designer/template/all
  method: GET
  detail: 获取主动上报侦测应用模板列表
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
    applicationCode: ${{app2_code()}}
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 获取应用周期参数配置
applicationParam_GetReportParamConfig_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/applicationParam/getParamConfig
  method: POST
  detail: 获取主动上报侦测周期参数配置
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
    content-type: application/json
  requestType: json
  is_run: true
  data:
    paramCatg: PERIOD
    sceneCatg: APPLICATION
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 查询应用流程列表
process_FindProcessList_002:
  host: ${{athena_designer_host()}}
  url: /athena-designer/process/findProcessList
  method: GET
  detail: 查询主动上报侦测相关流程列表
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
    application: ${{app2_code()}}
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 保存主动上报类型侦测规则
monitorRule_SaveReportMonitor_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/task/monitorRule/saveMonitorRule
  method: POST
  detail: 保存主动上报类型侦测规则配置
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
    content-type: application/json
  requestType: json
  is_run: true
  data:
    code: $cache{report_monitor_code}
    triggerAction: null
    name: "主动上报侦测${{get_time()}}"
    tenantId: null
    lang:
      name:
        zh_CN: "主动上报侦测${{get_time()}}"
        zh_TW: "主動上報偵測${{get_time()}}"
        en_US: "Report Monitor${{get_time()}}"
    type: "REPORT"
    product:
      - code: ${{app2_code()}}
        rule:
          monitorRuleId: $cache{report_monitor_code}
          productName: ${{app2_code()}}
    autoRun: false
    isDesignerSet: true
    actionType: null
    actionCommonId: null
    category: "REPORT"
    application: ${{app2_code()}}
    addSourceType: "auto_perspective"
    params:
      - lang:
          name:
            zh_CN: "名称"
            zh_TW: "名稱"
            en_US: "name"
          tip:
            zh_CN: "在交付设计器显示的参数名称"
            zh_TW: "在交付設計器顯示的參數名稱"
            en_US: "在交付設計器顯示的參數名稱"
          value:
            zh_CN: "主动上报侦测${{get_time()}}"
            zh_TW: "主動上報偵測${{get_time()}}"
            en_US: "Report Monitor${{get_time()}}"
        code: "name"
        name: "名称"
        displayType: "INPUT"
        required: true
        readOnly: false
        sequence: 100
        tip: "在交付设计器显示的参数名称"
        defaultValue: ""
        needLang: true
        value: "主动上报侦测${{get_time()}}"
        options: []
        width: "140px"
        attrIndex: 0
      - lang:
          name:
            zh_CN: "参数项描述"
            zh_TW: "參數項描述"
            en_US: "Parameter item description"
          tip:
            zh_CN: "描述同步至交付设计器上的参数描述区域"
            zh_TW: "描述同步至交付設計器上的參數描述區域"
            en_US: "Description synchronized to the parameter description area on the delivery designer"
          value:
            zh_CN: "主动上报类型侦测测试${{get_time()}}"
            zh_TW: "主動上報類型偵測測試${{get_time()}}"
            en_US: "Report type monitor test${{get_time()}}"
        code: "description"
        name: "参数项描述"
        displayType: "TEXTAREA"
        required: true
        readOnly: false
        sequence: 200
        tip: "在交付设计器显示的参数描述"
        defaultValue: ""
        needLang: true
        value: "主动上报类型侦测测试${{get_time()}}"
        options: []
        breakWord: true
        width: "140px"
        placeholder: "主动上报侦测${{get_time()}}"
        attrIndex: 1
      # ... 其他参数配置（可根据需要添加完整参数列表）
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 查询主动上报侦测规则详情
monitorRule_GetReportMonitor_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/task/monitorRule/getMonitorRule/$cache{report_monitor_code}
  method: GET
  detail: 查询主动上报类型侦测规则详情
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:

# 生成侦测规则编码
code_GenerateMonitorCode_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/code/generate/standard
  method: POST
  detail: 生成定时侦测规则编码
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
    content-type: application/json
  requestType: json
  is_run: true
  data:
    typeCode: "default"
    paramMap:
      abbreviationCode: "DT"
      application: ${{app2_code()}}
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:
  current_request_set_cache:
    - type: response
      jsonpath: $.data
      name: monitor_rule_code

# 创建定时侦测规则
monitor_CreateScheduleMonitor_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/task/monitorRule/saveMonitorRule
  method: POST
  detail: 创建定时侦测规则
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
    content-type: application/json
  requestType: json
  is_run: true
  data:
    code: $cache{monitor_rule_code}
    triggerAction: null
    product:
      - code: ${{app2_code()}}
        rule:
          monitorRuleId: $cache{monitor_rule_code}
          productName: ${{app2_code()}}
    name: "定时侦测${{get_time()}}"
    tenantId: null
    lang:
      name:
        zh_CN: "定时侦测${{get_time()}}"
        zh_TW: "定時偵測${{get_time()}}"
        en_US: "Schedule Monitor${{get_time()}}"
    standardPollingRule:
      start_time: "2025-11-19 00:00:00"
      monthly: 1
      bymonthday: 1
    autoRun: false
    executeOnStartup: false
    isDesignerSet: true
    actionType: null
    actionCommonId: null
    category: "SCHEDULE"
    application: ${{app2_code()}}
    addSourceType: "auto_perspective"
    params:
      - lang:
          name:
            zh_CN: "名称"
            zh_TW: "名稱"
            en_US: "name"
          tip:
            zh_CN: "在交付设计器显示的参数名称"
            zh_TW: "在交付設計器顯示的參數名稱"
            en_US: "Parameter name displayed in delivery designer"
          value:
            zh_CN: "定时侦测${{get_time()}}"
            zh_TW: "定時偵測${{get_time()}}"
            en_US: "Schedule Monitor${{get_time()}}"
        code: "name"
        name: "名称"
        displayType: "INPUT"
        required: true
        readOnly: false
        sequence: 100
        tip: "在交付设计器显示的参数名称"
        defaultValue: ""
        needLang: true
        value: "定时侦测${{get_time()}}"
        options: []
        width: "140px"
        attrIndex: 0
      - lang:
          name:
            zh_CN: "参数项描述"
            zh_TW: "參數項描述"
            en_US: "Parameter item description"
          tip:
            zh_CN: "描述同步至交付设计器上的参数描述区域"
            zh_TW: "描述同步至交付設計器上的參數描述區域"
            en_US: "Description synchronized to the parameter description area on the delivery designer"
          value:
            zh_CN: "定时侦测描述${{get_time()}}"
            zh_TW: "定時偵測描述${{get_time()}}"
            en_US: "Schedule monitor description${{get_time()}}"
        code: "description"
        name: "参数项描述"
        displayType: "TEXTAREA"
        required: true
        readOnly: false
        sequence: 200
        tip: "在交付设计器显示的参数描述"
        defaultValue: ""
        needLang: true
        value: "定时侦测描述${{get_time()}}"
        options: []
        breakWord: true
        width: "140px"
        placeholder: "定时侦测${{get_time()}}"
        attrIndex: 1
      - lang:
          name:
            zh_CN: "编码"
            zh_TW: "編碼"
            en_US: "key"
          tip:
            zh_CN: "编码"
            zh_TW: "編碼"
            en_US: "key"
        code: "key"
        name: "编码"
        displayType: "INPUT"
        required: true
        readOnly: false
        sequence: 300
        tip: "参数编码"
        defaultValue: ""
        needLang: false
        value: $cache{monitor_rule_code}
        options: []
        width: "140px"
        attrIndex: 2
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:
  current_request_set_cache:
    - type: response
      jsonpath: $.data
      name: monitor_rule_id

# 查询定时侦测规则详情
monitor_GetScheduleMonitor_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/task/monitorRule/getMonitorRule/$cache{monitor_rule_code}
  method: GET
  detail: 查询定时侦测规则详情
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
  requestType: PARAMS
  is_run: true
  data:
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType:
    data:
      jsonpath: $.data.code
      type: ==
      value: $cache{monitor_rule_code}
      AssertType:

# 更新定时侦测规则
monitor_UpdateScheduleMonitor_001:
  host: ${{athena_designer_host()}}
  url: /athena-designer/task/monitorRule/updateMonitorRule
  method: POST
  detail: 更新定时侦测规则
  headers:
    digi-middleware-auth-user: $cache{token}
    token: $cache{token}
    locale: zh_CN
    content-type: application/json
  requestType: json
  is_run: true
  data:
    code: $cache{monitor_rule_code}
    triggerAction: null
    product:
      - code: ${{app2_code()}}
        rule:
          monitorRuleId: $cache{monitor_rule_code}
          productName: ${{app2_code()}}
    name: "更新定时侦测${{get_time()}}"
    tenantId: "SYSTEM"
    lang:
      name:
        zh_CN: "更新定时侦测${{get_time()}}"
        zh_TW: "更新定時偵測${{get_time()}}"
        en_US: "Updated Schedule Monitor${{get_time()}}"
    standardPollingRule:
      start_time: "2025-11-19 00:00:00"
      monthly: 1
      bymonthday: 1
    autoRun: false
    executeOnStartup: false
    isDesignerSet: true
    actionType: null
    actionCommonId: null
    category: "SCHEDULE"
    application: ${{app2_code()}}
    addSourceType: "auto_perspective"
    params:
      - lang:
          name:
            zh_CN: "名称"
            zh_TW: "名稱"
            en_US: "name"
          tip:
            zh_CN: "在交付设计器显示的参数名称"
            zh_TW: "在交付設計器顯示的參數名稱"
            en_US: "Parameter name displayed in delivery designer"
          value:
            zh_CN: "更新定时侦测${{get_time()}}"
            zh_TW: "更新定時偵測${{get_time()}}"
            en_US: "Updated Schedule Monitor${{get_time()}}"
        code: "name"
        name: "名称"
        displayType: "INPUT"
        required: true
        readOnly: false
        sequence: 100
        tip: "在交付设计器显示的参数名称"
        defaultValue: ""
        needLang: true
        value: "更新定时侦测${{get_time()}}"
        options: []
        width: "140px"
        attrIndex: 0
      - lang:
          name:
            zh_CN: "参数项描述"
            zh_TW: "參數項描述"
            en_US: "Parameter item description"
          tip:
            zh_CN: "描述同步至交付设计器上的参数描述区域"
            zh_TW: "描述同步至交付設計器上的參數描述區域"
            en_US: "Description synchronized to the parameter description area on the delivery designer"
          value:
            zh_CN: "更新定时侦测描述${{get_time()}}"
            zh_TW: "更新定時偵測描述${{get_time()}}"
            en_US: "Updated schedule monitor description${{get_time()}}"
        code: "description"
        name: "参数项描述"
        displayType: "TEXTAREA"
        required: true
        readOnly: false
        sequence: 200
        tip: "在交付设计器显示的参数描述"
        defaultValue: ""
        needLang: true
        value: "更新定时侦测描述${{get_time()}}"
        options: []
        breakWord: true
        width: "140px"
        placeholder: "更新定时侦测${{get_time()}}"
        attrIndex: 1
      - lang:
          name:
            zh_CN: "编码"
            zh_TW: "編碼"
            en_US: "key"
          tip:
            zh_CN: "编码"
            zh_TW: "編碼"
            en_US: "key"
        code: "key"
        name: "编码"
        displayType: "INPUT"
        required: true
        readOnly: false
        sequence: 300
        tip: "参数编码"
        defaultValue: ""
        needLang: false
        value: $cache{monitor_rule_code}
        options: []
        width: "140px"
        attrIndex: 2
  dependence_case: false
  dependence_case_data:
  assert:
    code:
      jsonpath: $.code
      type: ==
      value: 0
      AssertType: